{
  "gameConfig": {
    "startingMoney": 10000,
    "startingReputation": 0,
    "baseIncome": 100,
    "baseCosts": 50,
    "scalingFormulas": {
      "moneyScaling": "turn * 1.05",
      "reputationImpact": "reputation * 0.01",
      "riskCalculation": "max(0, min(100, 50 - reputation))"
    },
    "version": "1.0.0"
  },
  "npcs": [
    {
      "id": "commoner_tom",
      "name": "Том Фермер",
      "class": "commoner",
      "wealth": 1,
      "reliability": 90,
      "portraits": {
        "neutral": "/images/npcs/commoner_neutral.png",
        "positive": "/images/npcs/commoner_positive.png",
        "negative": "/images/npcs/commoner_negative.png"
      },
      "description": "Скромный фермер в поисках простого эля и горячей еды"
    },
    {
      "id": "adventurer_lyra",
      "name": "Лира Следопыт",
      "class": "adventurer",
      "wealth": 2,
      "reliability": 70,
      "portraits": {
        "neutral": "/images/npcs/adventurer_neutral.png",
        "positive": "/images/npcs/adventurer_positive.png",
        "negative": "/images/npcs/adventurer_negative.png"
      },
      "description": "Опытная искательница приключений с историями и монетами"
    },
    {
      "id": "criminal_vex",
      "name": "Векс Тень",
      "class": "criminal",
      "wealth": 3,
      "reliability": 40,
      "portraits": {
        "neutral": "/images/npcs/criminal_neutral.png",
        "positive": "/images/npcs/criminal_positive.png",
        "negative": "/images/npcs/criminal_negative.png"
      },
      "description": "Загадочная фигура, торгующая секретами и краденым"
    },
    {
      "id": "noble_aldric",
      "name": "Лорд Алдрик",
      "class": "noble",
      "wealth": 4,
      "reliability": 85,
      "portraits": {
        "neutral": "/images/npcs/noble_neutral.png",
        "positive": "/images/npcs/noble_positive.png",
        "negative": "/images/npcs/noble_negative.png"
      },
      "description": "Богатый дворянин с дорогими вкусами и высокими ожиданиями"
    },
    {
      "id": "cleric_elena",
      "name": "Сестра Елена",
      "class": "cleric",
      "wealth": 2,
      "reliability": 95,
      "portraits": {
        "neutral": "/images/npcs/cleric_neutral.png",
        "positive": "/images/npcs/cleric_positive.png",
        "negative": "/images/npcs/cleric_negative.png"
      },
      "description": "Преданная жрица, ценящая милосердие и честность"
    },
    {
      "id": "mage_zephyr",
      "name": "Зефир Мудрый",
      "class": "mage",
      "wealth": 3,
      "reliability": 75,
      "portraits": {
        "neutral": "/images/npcs/mage_neutral.png",
        "positive": "/images/npcs/mage_positive.png",
        "negative": "/images/npcs/mage_negative.png"
      },
      "description": "Эксцентричный волшебник с необычными просьбами и магической оплатой"
    },
    {
      "id": "royal_princess",
      "name": "Принцесса Ария",
      "class": "royal",
      "wealth": 5,
      "reliability": 80,
      "portraits": {
        "neutral": "/images/npcs/royal_neutral.png",
        "positive": "/images/npcs/royal_positive.png",
        "negative": "/images/npcs/royal_negative.png"
      },
      "description": "Принцесса королевства, путешествующая инкогнито"
    },
    {
      "id": "crime_boss_grimm",
      "name": "Гримм Палач",
      "class": "crime_boss",
      "wealth": 4,
      "reliability": 50,
      "portraits": {
        "neutral": "/images/npcs/crime_boss_neutral.png",
        "positive": "/images/npcs/crime_boss_positive.png",
        "negative": "/images/npcs/crime_boss_negative.png"
      },
      "description": "Местный криминальный босс, контролирующий подполье"
    },
    {
      "id": "dragon_smaug",
      "name": "Смауг Золотой",
      "class": "dragon",
      "wealth": 5,
      "reliability": 50,
      "portraits": {
        "neutral": "/images/npcs/dragon_neutral.png",
        "positive": "/images/npcs/dragon_positive.png",
        "negative": "/images/npcs/dragon_negative.png"
      },
      "description": "Древний дракон с сокровищами и ужасным характером"
    }
  ],
  "cards": [
    {
      "id": "farmer_thirsty",
      "type": "immediate",
      "category": "service",
      "npcId": "commoner_tom",
      "title": "Жаждущий фермер",
      "description": "Простая просьба о напитке",
      "situation": "Том входит в вашу таверну, измученный долгим днём в полях. Его одежда пыльная, и он выглядит измождённым. Он подходит к бару с усталой улыбкой.",
      "priority": 1,
      "options": [
        {
          "text": "Подать свежий эль (стоит 20 золота)",
          "consequences": {
            "money": 50,
            "reputation": 1
          },
          "resultText": "Лицо Тома светлеет, когда он пробует холодный эль. 'То, что нужно!' - восклицает он, рассказывая другим фермерам о вашем гостеприимстве.",
          "npcEmotion": "positive"
        },
        {
          "text": "Подать разбавленный эль для экономии",
          "consequences": {
            "money": 40,
            "reputation": -2
          },
          "resultText": "Том хмурится после первого глотка. 'На вкус как помои', - бормочет он, быстро уходя.",
          "npcEmotion": "negative"
        },
        {
          "text": "Предложить премиальный импортный эль за большую цену",
          "consequences": {
            "money": 80,
            "reputation": 2
          },
          "resultText": "Том удивлён, но доволен. 'Шикарная штука! Стоит каждой медяшки!' Он обязательно вернётся.",
          "npcEmotion": "positive"
        },
        {
          "text": "Извиниться, что эль закончился",
          "consequences": {
            "money": 0,
            "reputation": -1
          },
          "resultText": "Том глубоко вздыхает. 'Что за таверна без эля?' Он уходит разочарованным.",
          "npcEmotion": "neutral"
        }
      ],
      "requirements": {
        "minMoney": 20
      }
    },
    {
      "id": "adventurer_proposal",
      "type": "passive_income",
      "category": "business",
      "npcId": "adventurer_lyra",
      "title": "Предложение искательницы приключений",
      "description": "Деловое предложение от странствующей авантюристки",
      "situation": "Лира облокачивается на барную стойку, расстелив перед собой потрёпанную карту. 'Я путешествую по многим городам', - говорит она. 'Могу рассказывать о вашей таверне в обмен на бесплатную еду, когда буду здесь. Что скажете?'",
      "priority": 2,
      "options": [
        {
          "text": "С радостью принять её предложение",
          "consequences": {
            "passiveIncome": {
              "id": "adventurer_referrals",
              "amount": 50,
              "description": "Рекомендации искателей приключений",
              "remainingTurns": 20
            }
          },
          "resultText": "Лира ухмыляется и пожимает вам руку. 'Вы не пожалеете! Я буду направлять к вам каждого встреченного искателя приключений.'",
          "npcEmotion": "positive"
        },
        {
          "text": "Предложить взамен еду за полцены",
          "consequences": {
            "money": 100,
            "passiveIncome": {
              "id": "adventurer_referrals_reduced",
              "amount": 30,
              "description": "Рекомендации искателей приключений (меньше)",
              "remainingTurns": 15
            }
          },
          "resultText": "Лира обдумывает предложение, затем кивает. 'Справедливо. Полцены так полцены, и я всё равно буду упоминать ваше заведение.'",
          "npcEmotion": "neutral"
        },
        {
          "text": "Вежливо отказаться",
          "consequences": {
            "money": 0
          },
          "resultText": "Лира пожимает плечами. 'Ваша потеря, трактирщик.' Она заказывает обычную еду и платит полную цену.",
          "npcEmotion": "neutral"
        },
        {
          "text": "Предложить платить ей за рекомендации",
          "consequences": {
            "money": -200,
            "reputation": 5
          },
          "resultText": "Глаза Лиры расширяются. 'Вот это деловая хватка! Я позабочусь, чтобы все узнали о вашей щедрости.'",
          "npcEmotion": "positive"
        }
      ]
    },
    {
      "id": "noble_banquet",
      "type": "immediate",
      "category": "event",
      "npcId": "noble_aldric",
      "title": "Заказ банкета от дворянина",
      "description": "Рискованная возможность организовать приём",
      "situation": "Лорд Алдрик величественно входит в таверну со свитой. 'Мне нужно ваше заведение для банкета завтра вечером. Будут присутствовать двадцать дворян. Это может создать вашу репутацию... или уничтожить её.'",
      "priority": 3,
      "options": [
        {
          "text": "Согласиться и приготовить роскошный пир (стоит 2000 золота)",
          "consequences": {
            "money": 5000,
            "reputation": 20
          },
          "resultText": "Банкет прошёл триумфально! Дворяне поднимают тосты в вашу честь, и слава о вашем мастерстве разносится по всему королевству.",
          "npcEmotion": "positive"
        },
        {
          "text": "Согласиться, но сэкономить на всём",
          "consequences": {
            "money": 3000,
            "reputation": -30
          },
          "resultText": "Катастрофа! Дворяне возмущены некачественной едой. Лорд Алдрик в ярости покидает таверну, клянясь уничтожить вашу репутацию.",
          "npcEmotion": "negative"
        },
        {
          "text": "Вежливо отказаться из-за слишком короткого срока",
          "consequences": {
            "money": 0,
            "reputation": -5
          },
          "resultText": "Лорд Алдрик хмурится. 'Как разочаровывает. Я слышал хорошие отзывы об этом месте.' Он тихо уходит.",
          "npcEmotion": "neutral"
        },
        {
          "text": "Порекомендовать заведение конкурента",
          "consequences": {
            "money": 200,
            "reputation": 10
          },
          "resultText": "Лорд Алдрик удивлён вашей честностью. 'Порядочность! Как освежает. Вот вам за беспокойство.'",
          "npcEmotion": "positive"
        }
      ],
      "requirements": {
        "minMoney": 2000,
        "minReputation": 10
      }
    },
    {
      "id": "criminal_protection",
      "type": "debt",
      "category": "threat",
      "npcId": "criminal_vex",
      "title": "Предложение защиты",
      "description": "Предложение, от которого сложно отказаться",
      "situation": "Векс скользит в тёмную угловую кабинку. 'Милое местечко у вас тут. Было бы жаль, если бы с ним что-то... случилось. Мои компаньоны предлагают защиту за разумную плату.'",
      "priority": 2,
      "options": [
        {
          "text": "Принять защиту (100 золота за ход)",
          "consequences": {
            "debt": {
              "id": "protection_money",
              "principal": 0,
              "totalAmount": 1000,
              "turnsRemaining": 10,
              "paymentPerTurn": 100,
              "creditorId": "criminal_vex",
              "collateral": "Безопасность вашей таверны"
            }
          },
          "resultText": "Векс холодно улыбается. 'Умный выбор. У вас не будет никаких... несчастных случаев. Плата раз в неделю.'",
          "npcEmotion": "neutral"
        },
        {
          "text": "Отказаться и стоять на своём",
          "consequences": {
            "money": -500,
            "reputation": 10,
            "flags": ["refused_protection"]
          },
          "resultText": "Той ночью ваши окна разбиты. Но горожане восхищаются вашей смелостью противостоять преступникам.",
          "npcEmotion": "negative"
        },
        {
          "text": "Немедленно сообщить городской страже",
          "consequences": {
            "reputation": 15,
            "flags": ["reported_criminals"],
            "npcRelationship": {
              "npcId": "criminal_vex",
              "change": -50
            }
          },
          "resultText": "Стража благодарит вас за наводку. Векс злобно смотрит на вас, пока его арестовывают. Вы нажили могущественного врага.",
          "npcEmotion": "negative"
        },
        {
          "text": "Поторговаться за меньшую ставку",
          "consequences": {
            "debt": {
              "id": "protection_money_reduced",
              "principal": 0,
              "totalAmount": 500,
              "turnsRemaining": 10,
              "paymentPerTurn": 50,
              "creditorId": "criminal_vex"
            }
          },
          "resultText": "Векс размышляет. 'У вас есть смелость. Хорошо, половинная ставка. Но не испытывайте судьбу.'",
          "npcEmotion": "positive"
        }
      ]
    },
    {
      "id": "cleric_charity",
      "type": "immediate",
      "category": "moral",
      "npcId": "cleric_elena",
      "title": "Мольба о милосердии",
      "description": "Испытание вашей щедрости",
      "situation": "Сестра Елена входит с группой сирот. 'Дети не ели два дня. Я знаю, времена тяжёлые, но не могли бы вы поделиться едой? Боги помнят доброту.'",
      "priority": 2,
      "options": [
        {
          "text": "Накормить их досыта бесплатно",
          "consequences": {
            "money": -100,
            "reputation": 15,
            "temporaryEffect": {
              "id": "blessed",
              "type": "reputation_boost",
              "value": 1.2,
              "turnsRemaining": 10,
              "description": "Благословение богов"
            }
          },
          "resultText": "Глаза сестры Елены наполняются слезами. 'Благослови вас небеса!' Дети счастливо едят. Вы чувствуете божественное тепло.",
          "npcEmotion": "positive"
        },
        {
          "text": "Предложить остатки хлеба и воду",
          "consequences": {
            "money": -20,
            "reputation": 5
          },
          "resultText": "Сестра Елена благодарно кивает. 'Каждая крошка важна. Спасибо за вашу доброту.'",
          "npcEmotion": "neutral"
        },
        {
          "text": "Взять полцены за простую еду",
          "consequences": {
            "money": 50,
            "reputation": -5
          },
          "resultText": "Сестра Елена вздыхает и пересчитывает свои скудные монеты. 'Полагаю, бизнес есть бизнес...'",
          "npcEmotion": "negative"
        },
        {
          "text": "Отказать - вы не можете позволить себе благотворительность",
          "consequences": {
            "reputation": -15,
            "temporaryEffect": {
              "id": "cursed",
              "type": "reputation_boost",
              "value": 0.8,
              "turnsRemaining": 5,
              "description": "Проклятие за жадность"
            }
          },
          "resultText": "Лицо сестры Елены каменеет. 'Да не познаете вы голода.' Она уходит, и вы чувствуете холод.",
          "npcEmotion": "negative"
        }
      ]
    },
    {
      "id": "mage_experiment",
      "type": "modifier",
      "category": "magical",
      "npcId": "mage_zephyr",
      "title": "Магический эксперимент",
      "description": "Необычное магическое предложение",
      "situation": "Зефир врывается в возбуждении, его мантия обожжена. 'Мне нужны ваши крепчайшие напитки для эксперимента! Взамен я зачарую вашу таверну. Что может пойти не так?'",
      "priority": 3,
      "options": [
        {
          "text": "Предоставить лучшие напитки во имя науки!",
          "consequences": {
            "money": -200,
            "temporaryEffect": {
              "id": "magical_attraction",
              "type": "money_multiplier",
              "value": 1.5,
              "turnsRemaining": 15,
              "description": "Магическая аура привлекает клиентов"
            }
          },
          "resultText": "Эксперимент удался! Ваша таверна теперь мягко светится, привлекая любопытных посетителей издалека.",
          "npcEmotion": "positive"
        },
        {
          "text": "Предложить обычные напитки и надеяться на лучшее",
          "consequences": {
            "money": -50,
            "reputation": -10,
            "temporaryEffect": {
              "id": "wild_magic",
              "type": "risk_modifier",
              "value": 2,
              "turnsRemaining": 10,
              "description": "Непредсказуемые магические эффекты"
            }
          },
          "resultText": "Эксперимент пошёл не так! Случайные магические эффекты теперь преследуют вашу таверну. Упс.",
          "npcEmotion": "negative"
        },
        {
          "text": "Настоять на предоплате",
          "consequences": {
            "money": 300,
            "reputation": 5
          },
          "resultText": "Зефир ворчит, но платит. 'Никакого духа приключений в наши дни...' Эксперимент безвредно сходит на нет.",
          "npcEmotion": "neutral"
        },
        {
          "text": "Отказаться - слишком опасно!",
          "consequences": {
            "reputation": 3,
            "npcRelationship": {
              "npcId": "mage_zephyr",
              "change": -10
            }
          },
          "resultText": "Зефир фыркает. 'Трус! Я найду кого-то с воображением!' Он вылетает в клубах дыма.",
          "npcEmotion": "negative"
        }
      ]
    },
    {
      "id": "princess_incognito",
      "type": "chain",
      "category": "royal",
      "npcId": "royal_princess",
      "title": "Таинственная знатная гостья",
      "description": "Скрытная посетительница с королевской осанкой",
      "situation": "Фигура в плаще входит и садится в углу. Когда она опускает капюшон, вы узнаёте принцессу Арию! Она прикладывает палец к губам. 'Пожалуйста, я просто хочу провести обычный вечер.'",
      "priority": 4,
      "options": [
        {
          "text": "Обращаться как с обычной посетительницей",
          "consequences": {
            "money": 100,
            "reputation": 30,
            "flags": ["princess_friend"],
            "delayedEvent": {
              "cardId": "princess_reward",
              "turnsUntil": 5
            }
          },
          "resultText": "Принцесса расслабляется и наслаждается простой едой. 'Спасибо за вашу деликатность. Я этого не забуду.'",
          "npcEmotion": "positive"
        },
        {
          "text": "Незаметно оказать особое внимание",
          "consequences": {
            "money": -50,
            "reputation": 20,
            "npcRelationship": {
              "npcId": "royal_princess",
              "change": 30
            }
          },
          "resultText": "Принцесса замечает ваши старания. 'Вы добры, но я пришла сюда, чтобы избежать особого обращения.'",
          "npcEmotion": "neutral"
        },
        {
          "text": "Сообщить королевской страже за награду",
          "consequences": {
            "money": 500,
            "reputation": -50,
            "flags": ["betrayed_princess"],
            "npcRelationship": {
              "npcId": "royal_princess",
              "change": -100
            }
          },
          "resultText": "Стражники врываются. Принцесса смотрит на вас с чувством предательства. 'Я запомню это вероломство.'",
          "npcEmotion": "negative"
        },
        {
          "text": "Предложить отдельную комнату для безопасности",
          "consequences": {
            "money": 200,
            "reputation": 10
          },
          "resultText": "Принцесса улыбается. 'Заботливо, но я предпочту сидеть среди людей. Всё же ценю вашу заботу.'",
          "npcEmotion": "positive"
        }
      ],
      "requirements": {
        "minReputation": 20
      }
    },
    {
      "id": "crime_boss_deal",
      "type": "immediate",
      "category": "underworld",
      "npcId": "crime_boss_grimm",
      "title": "Предложение из преступного мира",
      "description": "Криминальный босс хочет использовать вашу таверну",
      "situation": "Гримм входит с двумя телохранителями. В таверне воцаряется тишина. 'Мне нужна ваша задняя комната для... встречи сегодня вечером. Вам хорошо заплатят. Или можете отказаться, и мы это запомним.'",
      "priority": 3,
      "options": [
        {
          "text": "Принять сделку и не задавать вопросов",
          "consequences": {
            "money": 1000,
            "reputation": -20,
            "flags": ["criminal_associate"],
            "npcRelationship": {
              "npcId": "crime_boss_grimm",
              "change": 50
            }
          },
          "resultText": "Гримм одобрительно кивает. 'Умно. Вот ваше золото. Вы ничего не видели сегодня вечером.'",
          "npcEmotion": "positive"
        },
        {
          "text": "Отказаться - вы ведёте честный бизнес",
          "consequences": {
            "reputation": 25,
            "temporaryEffect": {
              "id": "criminal_threat",
              "type": "risk_modifier",
              "value": 1.5,
              "turnsRemaining": 20,
              "description": "Под угрозой преступников"
            }
          },
          "resultText": "Глаза Гримма сужаются. 'Честный? В этом городе? Вы сделали опасный выбор, трактирщик.'",
          "npcEmotion": "negative"
        },
        {
          "text": "Согласиться, но тайно сообщить страже",
          "consequences": {
            "money": 500,
            "reputation": 40,
            "flags": ["police_informant"],
            "npcRelationship": {
              "npcId": "crime_boss_grimm",
              "change": -100
            }
          },
          "resultText": "Стража проводит рейд! Гримма арестовывают, но он клянётся отомстить, когда его уводят.",
          "npcEmotion": "negative"
        },
        {
          "text": "Поторговаться за большую долю",
          "consequences": {
            "money": 1500,
            "reputation": -10,
            "npcRelationship": {
              "npcId": "crime_boss_grimm",
              "change": 20
            }
          },
          "resultText": "Гримм усмехается. 'У вас есть хребет. Хорошо, но это делает вас компаньоном. Пути назад нет.'",
          "npcEmotion": "neutral"
        }
      ]
    },
    {
      "id": "dragon_visit",
      "type": "immediate",
      "category": "legendary",
      "npcId": "dragon_smaug",
      "title": "Жажда дракона",
      "description": "Последнее испытание для вашей таверны",
      "situation": "Земля дрожит. Смауг Золотой приземляется снаружи, его огромная голова заглядывает в дверь. 'ТРАКТИРЩИК! Мне нужен ваш лучший напиток, или я превращу это место в ПЕПЕЛ!'",
      "priority": 4,
      "options": [
        {
          "text": "Подать легендарный резерв (стоит 5000 золота)",
          "consequences": {
            "money": 15000,
            "reputation": 50,
            "npcRelationship": {
              "npcId": "dragon_smaug",
              "change": 50
            },
            "flags": ["dragon_approved"]
          },
          "resultText": "Смауг пробует древнее вино и урчит одобрение. 'ПРЕВОСХОДНО! Ваша таверна под моей защитой!' Он платит древним золотом.",
          "npcEmotion": "positive"
        },
        {
          "text": "Попытаться выдать обычное вино за легендарное",
          "consequences": {
            "money": -10000,
            "reputation": -50,
            "temporaryEffect": {
              "id": "dragon_fire_damage",
              "type": "cost_reduction",
              "value": 0.5,
              "turnsRemaining": 10,
              "description": "Восстановление после драконьего огня"
            }
          },
          "resultText": "Смауг рычит в ярости! 'ВЫ СМЕЕТЕ МЕНЯ ОБМАНЫВАТЬ?!' Он сжигает половину таверны, прежде чем улететь.",
          "npcEmotion": "negative"
        },
        {
          "text": "Честно признаться, что нет ничего достойного",
          "consequences": {
            "reputation": 20,
            "npcRelationship": {
              "npcId": "dragon_smaug",
              "change": 10
            }
          },
          "resultText": "Смауг размышляет. 'По крайней мере, ты честен, червь. Я пощажу тебя... на этот раз.'",
          "npcEmotion": "neutral"
        },
        {
          "text": "Вызвать его на состязание в выпивке!",
          "consequences": {
            "money": 20000,
            "reputation": 100,
            "flags": ["dragon_drinking_buddy"],
            "npcRelationship": {
              "npcId": "dragon_smaug",
              "change": 100
            }
          },
          "resultText": "Смауг смеётся звуком, подобным грому. 'СМЕЛО!' Часы спустя вы каким-то образом победили! 'Ты заслужил моё уважение, крошечный друг!'",
          "npcEmotion": "positive"
        }
      ],
      "requirements": {
        "minMoney": 5000,
        "minReputation": 30
      }
    }
  ]
}